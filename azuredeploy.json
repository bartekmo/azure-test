{
	"$schema": "http://schema.management.azure.com/schemas/2014-04-01-preview/VNET.json",
	"contentVersion": "1.0.0.0",
	"parameters" : {
		"location": {
			"type" : "String",
			"defaultValue" : "West Europe"
		},
		"vmName" : {
			"type" : "String",
			"defaultValue" : "Bogdan-ARM-VM"
		},
		"virtualNetworkName":{
			"type" : "string",
			"defaultValue":"Bogdan-ARM-VirtualNetwork"
		},
		"addressPrefix":{
			"type" : "string",
			"defaultValue" : "10.0.0.0/16"
		},
		"subnet1Name": {
			"type" : "string",
			"defaultValue" : "Bogdan-ARM-Subnet-Vienna"
		},
		"subnet2Name": {
			"type" : "string",
			"defaultValue" : "Bogdan-ARM-Subnet-Innsbruck"
		},
		"subnet1Prefix" : {
			"type" : "string",
			"defaultValue" : "10.0.1.0/24"
		},
		"subnet2Prefix" : {
			"type" : "string",
			"defaultValue" : "10.0.100.0/24"
		}
	},
	"resources": [
	{
		"apiVersion": "2014-06-01",
		"type" : "Microsoft.ClassicNetwork/virtualNetworks",
		"name" : "[parameters('virtualNetworkName')]",
		"location" : "[parameters('location')]",
		"properties" : {
			"addressSpace": {
				"addressPrefixes": [
					"[parameters('addressPrefix')]"
				]
			},
			"subnets" : [
			{
				"name" : "[parameters('subnet1Name')]",
					"addressPrefix": "[parameters('subnet1Prefix')]"
			},
			{
				"name" : "[parameters('subnet2Name')]",
					"addressPrefix": "[parameters('subnet2Prefix')]"
			}
			]
		}
	},
	{
		"apiVersion" : "2014-06-01",
		"type" : "Microsoft.ClassicCompute/virtualMachines",
		"name" : "[parameters('vmName')]",
		"location" : "[parameters('location')]",
		"dependsOn" : [
			"[concat('Microsoft.ClassicNetwork/virtualNetworks/', parameters('virtualNetworkName'))]"
		],
		"properties" : {
			"storageProfiles" : {
				"osProfile" : {
					"computername" : "[parameters('vmName')]",
					"adminUsername" : "root",
					"adminPassword" : "ngf1r3wall"
				},
				"osDisk" : {
					"name" : "Bogdan-ARM-Disk",
					"vhd" : {
						"uri" : "[concat('http://cudademo.blob.core.windows.net/vhd/', 'GWAY-6.1.0-081.vhd')]"
					},
					"createOption" : "FromImage"
				}
			},
			"networkProfile" : {
				"virtualNetworks" : {
					"id" : "[resourceId('Microsoft.ClassicNetwork/virtualNetworks', parameters('subnet2Name'))]"
				}
			}
		}
	}
	]
}
